!function(e){"use strict";let i=null,t=function(t,d,u={},s=!0){s&&null!=i&&i.abort(),i=e.ajax({type:"post",dataType:"json",url:ajax_object.url,data:{action:t,nonce:ajax_object.nonce,data:d,lang:ajax_object.lang},success:function(e){n(t,e,u)}})},n=function(e,i,t){switch(e){case"guideplugin_guide_initialize":I(t,i);break;case"guideplugin_guide_updated_filter":r(t,i);break;case"guideplugin_guide_next_filter":a(t,i);break;case"guideplugin_guide_results":o(t,i)}},d=function(e,i){let n=C(e);if(0==n[n.length-1].values.length&&1==i.attr("data-input-required"))return void e.find(".guideplugin-input-required-modal").guideplugin_modal("open");x(e);let d={guide_id:e.attr("data-id"),current_index:i.attr("data-index"),filter_values:n};t("guideplugin_guide_next_filter",d,{guide:e,filter:i})},u=function(e,i){let t=C(e);0!=t[t.length-1].values.length||1!=i.attr("data-input-required")?("true"==e.attr("data-progress-modal")&&f(e),x(e),s(e,i)):e.find(".guideplugin-input-required-modal").guideplugin_modal("open")},s=function(e,i){let n={guide_id:e.attr("data-id"),filter_values:C(e,i.attr("data-index")),page:e.find(".guide-results").attr("data-next-page")};t("guideplugin_guide_results",n,{guide:e})},r=function(e,i){let t=e.guide,n=e.filter;if(1==i.success){let e=t.find(".guide-slider ").slick("slickCurrentSlide");t.find('.guide-slider [data-slick-index="'+e+'"] .guide-slider-item').replaceWith(i.data.current_filter),S(t.find(".js-range-slider")),w(t),v(t),g(t,n)}},a=function(e,i){let t=e.guide;e.filter;if(1==i.success){let e=t.find(".guide-slider ").slick("slickCurrentSlide")+1;if(t.find(".guide-slider").slick("slickAdd","<div><div>"+i.data.next_filter+"</div></div>"),S(t.find(".js-range-slider")),w(t),t.find(".slick-slide[data-slick-index="+e+"] img").length>0)return void t.find(".slick-slide[data-slick-index="+e+"] img").one("load",function(){l(t,i)});l(t,i)}},l=function(e,i){e.find(".guide-slider").slick("slickNext"),j()&&q(e.find(".guide-form")),e.attr("data-filter-count",i.data.filter_count),v(e)},o=function(e,i){let t=e.guide;w(t),t.find(".guide-results .guide-result-buttons").remove(),t.find(".guide-results").append(i.data.result_html),0==c(t)&&1==t.find(".guide-results").attr("data-next-page")&&h(t),t.find(".guide-results").attr("data-next-page",i.data.next_page)},g=function(e,i){if(1==i.attr("data-next-on-select"))return i.hasClass("guide-last-filter")?void u(e,i):void d(e,i)},f=function(i){let t=250,n=i.find(".guideplugin-progress-modal");q(i),c(i)&&(n.guideplugin_modal("open"),n.find(".guideplugin-modal-spinner").show(),n.find(".guideplugin-step-progress .guide-progress-step").each(function(d){let u=e(this);setTimeout(function(){p(i,n,u,d)},t),t+=2500}))},c=function(e){return"true"==e.attr("data-progress-modal")&&e.find(".guideplugin-step-progress .guide-progress-step").length>0},p=function(e,i,t,n){let d=100/i.find(".guide-progress-step").length*(n+1);i.find(".guide-search-progress .guide-progress-bar").width(d+"%"),i.find(".guide-progress-step").eq(n).addClass("guide-progress-step-show"),n>0&&i.find(".guide-progress-step").eq(n-1).addClass("guide-progress-step-hide"),i.find(".guide-progress-step").length==n+1&&(setTimeout(function(){i.find(".guideplugin-modal-spinner-wrapper").addClass("guideplugin-modal-spinner-finish")},1e3),setTimeout(function(){i.guideplugin_modal("close"),setTimeout(function(){!function(e){e.find(".guide-progress-step").removeClass("guide-progress-step-show guide-progress-step-hide"),e.find(".guideplugin-modal-spinner-wrapper").removeClass("guideplugin-modal-spinner-finish"),e.find(".guide-search-progress .guide-progress-bar").width("0%")}(i)},2e3)},2e3),setTimeout(function(){h(e)},1500))},h=function(e){"true"==e.attr("data-confetti")&&m(e),setTimeout(function(){b(e)},300)},m=function(i){let t=(i.offset().left+i.width()/2)/e(window).width();confetti({particleCount:100,spread:70,zIndex:99999,origin:{x:t,y:.5}})},b=function(e){e.find(".guide-form").hide(),e.find(".guide-results").show().addClass("guide-result-fade-in")},_=function(e){q(e),e.find(".guide-results").hide(),e.find(".guide-form").show().addClass("guide-result-fade-in"),setTimeout(function(){e.find(".guide-slider").slick("setPosition")},20)},v=function(e){let i=(parseInt(e.find(".slick-slide.slick-current").attr("data-slick-index"))+1)/parseInt(e.attr("data-filter-count"))*100;e.find(".guide-slider-progress .guide-progress-bar").css("width",i+"%")},k=function(e){!function(e,i){let n=C(e);x(e);let d={guide_id:e.attr("data-id"),current_index:i.attr("data-index"),filter_values:n};t("guideplugin_guide_updated_filter",d,{guide:e,filter:i})}(e.closest(".guideplugin"),e.closest(".guide-filter"))},x=function(e){e.find(".guide-form-buttons .guide-button").addClass("guide-button-hidden"),e.find(".guide-form-buttons .guide-button-spinner").show(),e.find(".guide-result-buttons .guide-button").addClass("guide-button-hidden"),e.find(".guide-result-buttons .guide-button-spinner").show()},w=function(e){e.find(".guide-form-buttons .guide-button").removeClass("guide-button-hidden"),e.find(".guide-form-buttons .guide-button-spinner").hide(),e.find(".guide-result-buttons .guide-button").removeClass("guide-button-hidden"),e.find(".guide-result-buttons .guide-button-spinner").hide()},C=function(i){let t=[];return i.find(".guide-filter").each(function(i){switch(e(this).attr("data-type")){case"cards":t.push(y(e(this)));break;case"slider":t.push(T(e(this)))}}),t},y=function(i){let t=[];return i.find(":input:checked").each(function(i){t.push(e(this).attr("data-card-value"))}),{filter_identifier:i.attr("data-unique-identifier"),values:t}},T=function(e){return{filter_identifier:e.attr("data-unique-identifier"),values:e.find(":input").val().split(";")}},j=function(){return e(window).width()<992},q=function(i){e("html, body").animate({scrollTop:i.offset().top},"slow")},S=function(e){e.ionRangeSlider({prettify:function(i){return z(i,e)},onFinish:function(e){k(e.input)}})},z=function(i,t){if(t.attr("data-prettify")&&e.isNumeric(i)){var n,d=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(n=d.length-1;n>0&&!(i>=d[n].value);n--);return String((i/d[n].value).toFixed(2).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+d[n].symbol).replace(".",",")}return i},I=function(e,i){let t=e.guide;t.find(".guide-slider").append(i.data.current_filter),setTimeout(function(){t.removeClass("guide-loading"),t.find(".guide-slider").slick({dots:!1,infinite:!1,speed:400,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:!1,draggable:!1,touchMove:!1,swipe:!1}),S(t.find(".js-range-slider"))},100)};e(document).ready(function(){e(".guideplugin").each(function(i){let n={guide_id:e(this).attr("data-id")};t("guideplugin_guide_initialize",n,{guide:e(this)},!1)})}),e(document).on("submit",".guideplugin form.guide-form",function(e){e.preventDefault()}),e(document).on("change",".guideplugin .guide-card input[type=radio]",function(){e(this).closest(".guide-filter-cards").find(".guide-card").removeClass("selected animate"),e(this).closest(".guide-card").addClass("selected animate"),k(e(this))}),e(document).on("change",".guideplugin .guide-card input[type=checkbox]",function(){e(this).closest(".guide-card").toggleClass("selected animate"),k(e(this))}),e(document).on("click",".guideplugin button.guide-button",function(){let i=e(this).closest(".guideplugin"),t=e(this).closest(".guide-filter"),n=i.find(".guide-slider"),r=n.slick("slickCurrentSlide");switch(e(this).attr("data-action")){case"next":d(i,t);break;case"previous":n.slick("slickPrev"),v(i),setTimeout(function(){n.slick("slickRemove",r)},500);break;case"finish":u(i,t);break;case"reset":!function(e){_(e),e.find(".guide-results").attr("data-next-page",1).html("")}(i);break;case"load_more":!function(e,i){x(e),s(e,i)}(i,t)}})}(jQuery);